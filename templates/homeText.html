{% load static %} {% get_media_prefix as MEDIA_URL %} {% block content %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css/homeText.css' %}"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <title>Home</title>
  </head>

  <body>
    <section id="home" class="d-flex align-items-center">
      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="left-box">
          <div class="icon-box">
            <h4 class="title">Encode</h4><br/>
            <form action="encode" method="post" enctype="multipart/form-data">
              {%csrf_token%} 
              <div class="input-group mb-3">
                <input type="text" name="message" id="speechToText" value="{{msg}}" class="form-control" placeholder="Enter message or click to record" aria-label="Recipient's username" aria-describedby="button-addon2">
                <button class="btn btn-outline-secondary" type="button" id="button-addon2" onclick="record()">Record</button>
              </div>
              <br/>Upload your image for Encoding:<br/>
              <div class="input-group mb-3">
                <input type="file" class="form-control" id="inputGroupFile02" name="myfile">
              </div>
              <br/><br/>
              <div class="d-grid gap-2 col-12 mx-auto">
                <input class="btn btn-primary" type="submit" value="Encode" />
              </div>
            </form>
          </div>
        </div>

        <div class="right-box">
          <div class="icon-box">
            <h4 class="title">Decode</h4><br/>
            <form action="decode" method="post" enctype="multipart/form-data">
              {%csrf_token%}
              Upload your image for Decoding the message:
              <div class="input-group mb-3">
                <input type="file" class="form-control" id="inputGroupFile02" name="myfile">
              </div>
              <br/><br/><br/><br/><br/>
              <div class="d-grid gap-2 col-12 mx-auto">
                <input class="btn btn-primary" type="submit" value="Decode" />
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>

    <script>
      function record() {
        var recognition = new webkitSpeechRecognition();
        recognition.lang = "en-GB";
        recognition.onresult = function (event) {
          document.getElementById("speechToText").value =
            event.results[0][0].transcript;
        };

        recognition.start();
      }
    </script>

    <!-- {{url}}
    <img src="{{MEDIA_URL}}{{url}}" height="200px" width="200px">
    {{message}}
    {{message1}}-->
  </body>
</html>

{%endblock%}
